function dydt=ODEfun(t,y,params) 
% Assign names for parameters 
[rpar,tau,ymax,speciesNames]=params{:}; 
TNFa = 1; 
IL1 = 2; 
IL6 = 3; 
LPS = 4; 
IFNg = 5; 
IL4 = 6; 
IL12 = 7; 
IL12_mrna = 8; 
IL10 = 9; 
IL10_mrna = 10; 
IFNb = 11; 
IFNb_mrna = 12; 
TNFR = 13; 
TRAF2 = 14; 
TAK1 = 15; 
NIK = 16; 
IKK = 17; 
IRF5 = 18; 
IKB = 19; 
NFKB = 20; 
TNFa_mrna = 21; 
IL15_mrna = 22; 
GMCSF_mrna = 23; 
Mcpt1_mrna = 24; 
IL8_mrna = 25; 
IL18_mrna = 26; 
IKBa_mrna = 27; 
iNOS_mrna = 28; 
iNOS = 29; 
COX2_mrna = 30; 
COX2 = 31; 
CXCL10_mrna = 32; 
CXCL10 = 33; 
cAMP = 34; 
PKA = 35; 
CREB = 36; 
CEBPbeta = 37; 
TSG6 = 38; 
CYP19 = 39; 
MKK36 = 40; 
p38 = 41; 
SP1 = 42; 
ATF2 = 43; 
ELK1 = 44; 
MMP3_mrna = 45; 
MMP7_mrna = 46; 
MMP9_mrna = 47; 
MMP12_mrna = 48; 
IL1R = 49; 
cRaf = 50; 
SOS = 51; 
Ras = 52; 
MEK12 = 53; 
ERK12 = 54; 
ETS1 = 55; 
MMP3 = 56; 
MMP7 = 57; 
MMP9 = 58; 
MKK47 = 59; 
JNK = 60; 
cJun = 61; 
cFos = 62; 
AP1 = 63; 
IL1_mrna = 64; 
IL6_mrna = 65; 
GP130 = 66; 
IL6R = 67; 
JAK2 = 68; 
GRB2 = 69; 
STAT3 = 70; 
A2M_mrna = 71; 
CRP_mrna = 72; 
VEGF_mrna = 73; 
SOCS3_mrna = 74; 
SOCS3 = 75; 
BCL3 = 76; 
PI3K = 77; 
AKT = 78; 
MCL1 = 79; 
CD14 = 80; 
TLR4 = 81; 
TRIF = 82; 
IRF3 = 83; 
CCL5_mrna = 84; 
IFNbR = 85; 
JAKIFNbR = 86; 
MyD88 = 87; 
IRAK4 = 88; 
IRAK1 = 89; 
TAB1 = 90; 
TRAF6 = 91; 
IFNgR = 92; 
GSK3 = 93; 
JAK12_IFNg = 94; 
SHP2 = 95; 
STAT1 = 96; 
IRF1 = 97; 
IRF1_mrna = 98; 
SOCS1 = 99; 
SOCS1_mrna = 100; 
Myc_mrna = 101; 
SMAD7_mrna = 102; 
ICAM1_mrna = 103; 
IL12Rb1 = 104; 
STAT4 = 105; 
IFNg_mrna = 106; 
IL4R = 107; 
JAK13_IL4 = 108; 
STAT6 = 109; 
CCL17_mrna = 110; 
CCL17 = 111; 
PPARg_mrna = 112; 
PPARg = 113; 
IL4Ra_mrna = 114; 
Arg1_mrna = 115; 
Arg1 = 116; 
CD23_mrna = 117; 
CD23 = 118; 
AMAC1_mrna = 119; 
AMAC1 = 120; 
KLF4_mrna = 121; 
KLF4 = 122; 
Fizz1_mrna = 123; 
Fizz1 = 124; 
Ym1_mrna = 125; 
Ym1 = 126; 
IL10R = 127; 
JAK1IL10R = 128; 
TNFa_trans = 129; 
IL1_trans = 130; 
IL6_trans = 131; 
IFNg_trans = 132; 
IL12_trans = 133; 
IL10_trans = 134; 
IFNb_trans = 135; 
IKB_trans = 136; 
IL4R_trans = 137; 
dydt = zeros(137,1); 
dydt(TNFa) = (OR(rpar(1,1),act(y(TNFa_trans),rpar(:,190)))*ymax(TNFa) - y(TNFa))/tau(TNFa); 
dydt(IL1) = (OR(rpar(1,2),act(y(IL1_trans),rpar(:,191)))*ymax(IL1) - y(IL1))/tau(IL1); 
dydt(IL6) = (OR(rpar(1,3),act(y(IL6_trans),rpar(:,192)))*ymax(IL6) - y(IL6))/tau(IL6); 
dydt(LPS) = (rpar(1,4)*ymax(LPS) - y(LPS))/tau(LPS); 
dydt(IFNg) = (OR(rpar(1,5),act(y(IFNg_trans),rpar(:,193)))*ymax(IFNg) - y(IFNg))/tau(IFNg); 
dydt(IL4) = (rpar(1,6)*ymax(IL4) - y(IL4))/tau(IL4); 
dydt(IL12) = (OR(rpar(1,9),OR(act(y(IL12_mrna),rpar(:,126)),act(y(IL12_trans),rpar(:,194))))*ymax(IL12) - y(IL12))/tau(IL12); 
dydt(IL12_mrna) = (OR(act(y(NFKB),rpar(:,57)),act(y(IRF1),rpar(:,115)))*ymax(IL12_mrna) - y(IL12_mrna))/tau(IL12_mrna); 
dydt(IL10) = (OR(rpar(1,7),act(y(IL10_trans),rpar(:,195)))*ymax(IL10) - y(IL10))/tau(IL10); 
dydt(IL10_mrna) = (OR(act(y(AP1),rpar(:,38)),OR(act(y(NFKB),rpar(:,56)),OR(act(y(SP1),rpar(:,74)),OR(act(y(CREB),rpar(:,96)),OR(act(y(CEBPbeta),rpar(:,98)),act(y(STAT3),rpar(:,146)))))))*ymax(IL10_mrna) - y(IL10_mrna))/tau(IL10_mrna); 
dydt(IFNb) = (OR(rpar(1,8),act(y(IFNb_trans),rpar(:,196)))*ymax(IFNb) - y(IFNb))/tau(IFNb); 
dydt(IFNb_mrna) = (OR(act(y(IRF3),rpar(:,18)),OR(act(y(IRF5),rpar(:,44)),act(y(IRF1),rpar(:,114))))*ymax(IFNb_mrna) - y(IFNb_mrna))/tau(IFNb_mrna); 
dydt(TNFR) = (act(y(TNFa),rpar(:,27))*ymax(TNFR) - y(TNFR))/tau(TNFR); 
dydt(TRAF2) = (act(y(TNFR),rpar(:,28))*ymax(TRAF2) - y(TRAF2))/tau(TRAF2); 
dydt(TAK1) = (OR(act(y(TAB1),rpar(:,25)),AND(rpar(:,29),act(y(TRAF2),rpar(:,29)),inhib(y(SOCS3),rpar(:,29))))*ymax(TAK1) - y(TAK1))/tau(TAK1); 
dydt(NIK) = (act(y(TAK1),rpar(:,41))*ymax(NIK) - y(NIK))/tau(NIK); 
dydt(IKK) = (act(y(NIK),rpar(:,42))*ymax(IKK) - y(IKK))/tau(IKK); 
dydt(IRF5) = (act(y(IKK),rpar(:,43))*ymax(IRF5) - y(IRF5))/tau(IRF5); 
dydt(IKB) = (OR(inhib(y(IKK),rpar(:,45)),OR(act(y(SOCS1),rpar(:,46)),OR(act(y(PPARg),rpar(:,47)),OR(act(y(BCL3),rpar(:,148)),act(y(IKB_trans),rpar(:,197))))))*ymax(IKB) - y(IKB))/tau(IKB); 
dydt(NFKB) = (OR(inhib(y(IKB),rpar(:,48)),OR(act(y(GSK3),rpar(:,49)),AND(rpar(:,110),act(y(STAT1),rpar(:,110)),inhib(y(PPARg),rpar(:,110)))))*ymax(NFKB) - y(NFKB))/tau(NFKB); 
dydt(TNFa_mrna) = (OR(act(y(IRF3),rpar(:,17)),OR(act(y(NFKB),rpar(:,50)),act(y(IRF1),rpar(:,116))))*ymax(TNFa_mrna) - y(TNFa_mrna))/tau(TNFa_mrna); 
dydt(IL15_mrna) = (act(y(NFKB),rpar(:,52))*ymax(IL15_mrna) - y(IL15_mrna))/tau(IL15_mrna); 
dydt(GMCSF_mrna) = (act(y(NFKB),rpar(:,53))*ymax(GMCSF_mrna) - y(GMCSF_mrna))/tau(GMCSF_mrna); 
dydt(Mcpt1_mrna) = (act(y(NFKB),rpar(:,54))*ymax(Mcpt1_mrna) - y(Mcpt1_mrna))/tau(Mcpt1_mrna); 
dydt(IL8_mrna) = (act(y(NFKB),rpar(:,55))*ymax(IL8_mrna) - y(IL8_mrna))/tau(IL8_mrna); 
dydt(IL18_mrna) = (act(y(NFKB),rpar(:,58))*ymax(IL18_mrna) - y(IL18_mrna))/tau(IL18_mrna); 
dydt(IKBa_mrna) = (act(y(NFKB),rpar(:,59))*ymax(IKBa_mrna) - y(IKBa_mrna))/tau(IKBa_mrna); 
dydt(iNOS_mrna) = (OR(act(y(NFKB),rpar(:,61)),act(y(IRF1),rpar(:,117)))*ymax(iNOS_mrna) - y(iNOS_mrna))/tau(iNOS_mrna); 
dydt(iNOS) = (AND(rpar(:,62),act(y(iNOS_mrna),rpar(:,62)),inhib(y(Arg1),rpar(:,62)))*ymax(iNOS) - y(iNOS))/tau(iNOS); 
dydt(COX2_mrna) = (act(y(NFKB),rpar(:,64))*ymax(COX2_mrna) - y(COX2_mrna))/tau(COX2_mrna); 
dydt(COX2) = (act(y(COX2_mrna),rpar(:,65))*ymax(COX2) - y(COX2))/tau(COX2); 
dydt(CXCL10_mrna) = (OR(act(y(NFKB),rpar(:,63)),act(y(STAT1),rpar(:,120)))*ymax(CXCL10_mrna) - y(CXCL10_mrna))/tau(CXCL10_mrna); 
dydt(CXCL10) = (act(y(CXCL10_mrna),rpar(:,121))*ymax(CXCL10) - y(CXCL10))/tau(CXCL10); 
dydt(cAMP) = (act(y(COX2),rpar(:,66))*ymax(cAMP) - y(cAMP))/tau(cAMP); 
dydt(PKA) = (act(y(cAMP),rpar(:,67))*ymax(PKA) - y(PKA))/tau(PKA); 
dydt(CREB) = (OR(AND(rpar(:,90),act(y(ERK12),rpar(:,90)),inhib(y(GSK3),rpar(:,90))),OR(AND(rpar(:,91),act(y(p38),rpar(:,91)),inhib(y(GSK3),rpar(:,91))),AND(rpar(:,92),act(y(PKA),rpar(:,92)),inhib(y(GSK3),rpar(:,92)))))*ymax(CREB) - y(CREB))/tau(CREB); 
dydt(CEBPbeta) = (act(y(CREB),rpar(:,97))*ymax(CEBPbeta) - y(CEBPbeta))/tau(CEBPbeta); 
dydt(TSG6) = (act(y(CEBPbeta),rpar(:,99))*ymax(TSG6) - y(TSG6))/tau(TSG6); 
dydt(CYP19) = (act(y(CEBPbeta),rpar(:,100))*ymax(CYP19) - y(CYP19))/tau(CYP19); 
dydt(MKK36) = (OR(act(y(TAK1),rpar(:,68)),AND(rpar(:,161),act(y(Ras),rpar(:,161)),inhib(y(AKT),rpar(:,161))))*ymax(MKK36) - y(MKK36))/tau(MKK36); 
dydt(p38) = (act(y(MKK36),rpar(:,69))*ymax(p38) - y(p38))/tau(p38); 
dydt(SP1) = (act(y(p38),rpar(:,70))*ymax(SP1) - y(SP1))/tau(SP1); 
dydt(ATF2) = (act(y(p38),rpar(:,71))*ymax(ATF2) - y(ATF2))/tau(ATF2); 
dydt(ELK1) = (OR(act(y(JNK),rpar(:,33)),act(y(p38),rpar(:,72)))*ymax(ELK1) - y(ELK1))/tau(ELK1); 
dydt(MMP3_mrna) = (OR(AND(rpar(:,76),act(y(ATF2),rpar(:,76)),act(y(ELK1),rpar(:,76))),act(y(ETS1),rpar(:,87)))*ymax(MMP3_mrna) - y(MMP3_mrna))/tau(MMP3_mrna); 
dydt(MMP7_mrna) = (OR(AND(rpar(:,77),act(y(ATF2),rpar(:,77)),act(y(ELK1),rpar(:,77))),act(y(ETS1),rpar(:,88)))*ymax(MMP7_mrna) - y(MMP7_mrna))/tau(MMP7_mrna); 
dydt(MMP9_mrna) = (OR(AND(rpar(:,78),act(y(ATF2),rpar(:,78)),act(y(ELK1),rpar(:,78))),act(y(ETS1),rpar(:,89)))*ymax(MMP9_mrna) - y(MMP9_mrna))/tau(MMP9_mrna); 
dydt(MMP12_mrna) = (act(y(STAT6),rpar(:,186))*ymax(MMP12_mrna) - y(MMP12_mrna))/tau(MMP12_mrna); 
dydt(IL1R) = (AND(rpar(:,10),act(y(IL1),rpar(:,10)),inhib(y(STAT6),rpar(:,10)))*ymax(IL1R) - y(IL1R))/tau(IL1R); 
dydt(cRaf) = (OR(act(y(TRAF6),rpar(:,82)),AND(rpar(:,160),act(y(Ras),rpar(:,160)),inhib(y(AKT),rpar(:,160))))*ymax(cRaf) - y(cRaf))/tau(cRaf); 
dydt(SOS) = (act(y(GRB2),rpar(:,158))*ymax(SOS) - y(SOS))/tau(SOS); 
dydt(Ras) = (act(y(SOS),rpar(:,159))*ymax(Ras) - y(Ras))/tau(Ras); 
dydt(MEK12) = (act(y(cRaf),rpar(:,83))*ymax(MEK12) - y(MEK12))/tau(MEK12); 
dydt(ERK12) = (OR(act(y(MEK12),rpar(:,84)),act(y(STAT1),rpar(:,109)))*ymax(ERK12) - y(ERK12))/tau(ERK12); 
dydt(ETS1) = (act(y(ERK12),rpar(:,86))*ymax(ETS1) - y(ETS1))/tau(ETS1); 
dydt(MMP3) = (act(y(MMP3_mrna),rpar(:,79))*ymax(MMP3) - y(MMP3))/tau(MMP3); 
dydt(MMP7) = (act(y(MMP7_mrna),rpar(:,80))*ymax(MMP7) - y(MMP7))/tau(MMP7); 
dydt(MMP9) = (act(y(MMP9_mrna),rpar(:,81))*ymax(MMP9) - y(MMP9))/tau(MMP9); 
dydt(MKK47) = (act(y(TAK1),rpar(:,30))*ymax(MKK47) - y(MKK47))/tau(MKK47); 
dydt(JNK) = (act(y(MKK47),rpar(:,31))*ymax(JNK) - y(JNK))/tau(JNK); 
dydt(cJun) = (act(y(JNK),rpar(:,32))*ymax(cJun) - y(cJun))/tau(cJun); 
dydt(cFos) = (act(y(ERK12),rpar(:,85))*ymax(cFos) - y(cFos))/tau(cFos); 
dydt(AP1) = (OR(AND(rpar(:,34),act(y(cJun),rpar(:,34)),act(y(cFos),rpar(:,34)),inhib(y(GSK3),rpar(:,34))),AND(rpar(:,35),act(y(cJun),rpar(:,35)),act(y(cFos),rpar(:,35)),inhib(y(PPARg),rpar(:,35))))*ymax(AP1) - y(AP1))/tau(AP1); 
dydt(IL1_mrna) = (OR(act(y(AP1),rpar(:,36)),AND(rpar(:,101),act(y(CEBPbeta),rpar(:,101)),act(y(AP1),rpar(:,101))))*ymax(IL1_mrna) - y(IL1_mrna))/tau(IL1_mrna); 
dydt(IL6_mrna) = (OR(act(y(AP1),rpar(:,37)),act(y(STAT1),rpar(:,107)))*ymax(IL6_mrna) - y(IL6_mrna))/tau(IL6_mrna); 
dydt(GP130) = (act(y(IL6R),rpar(:,133))*ymax(GP130) - y(GP130))/tau(GP130); 
dydt(IL6R) = (act(y(IL6),rpar(:,131))*ymax(IL6R) - y(IL6R))/tau(IL6R); 
dydt(JAK2) = (AND(rpar(:,134),act(y(GP130),rpar(:,134)),inhib(y(SOCS3),rpar(:,134)))*ymax(JAK2) - y(JAK2))/tau(JAK2); 
dydt(GRB2) = (OR(act(y(SHP2),rpar(:,136)),act(y(IL4R),rpar(:,163)))*ymax(GRB2) - y(GRB2))/tau(GRB2); 
dydt(STAT3) = (OR(AND(rpar(:,104),act(y(JAK12_IFNg),rpar(:,104)),inhib(y(SHP2),rpar(:,104))),OR(AND(rpar(:,105),inhib(y(GSK3),rpar(:,105)),act(y(JAK12_IFNg),rpar(:,105))),OR(AND(rpar(:,137),act(y(JAK2),rpar(:,137)),inhib(y(SHP2),rpar(:,137))),OR(AND(rpar(:,138),act(y(JAK2),rpar(:,138)),inhib(y(GSK3),rpar(:,138))),AND(rpar(:,151),inhib(y(GSK3),rpar(:,151)),act(y(JAK1IL10R),rpar(:,151)))))))*ymax(STAT3) - y(STAT3))/tau(STAT3); 
dydt(A2M_mrna) = (act(y(STAT3),rpar(:,139))*ymax(A2M_mrna) - y(A2M_mrna))/tau(A2M_mrna); 
dydt(CRP_mrna) = (act(y(STAT3),rpar(:,140))*ymax(CRP_mrna) - y(CRP_mrna))/tau(CRP_mrna); 
dydt(VEGF_mrna) = (act(y(STAT3),rpar(:,142))*ymax(VEGF_mrna) - y(VEGF_mrna))/tau(VEGF_mrna); 
dydt(SOCS3_mrna) = (OR(act(y(CREB),rpar(:,93)),act(y(STAT3),rpar(:,144)))*ymax(SOCS3_mrna) - y(SOCS3_mrna))/tau(SOCS3_mrna); 
dydt(SOCS3) = (AND(rpar(:,145),act(y(SOCS3_mrna),rpar(:,145)),inhib(y(STAT6),rpar(:,145)))*ymax(SOCS3) - y(SOCS3))/tau(SOCS3); 
dydt(BCL3) = (act(y(STAT3),rpar(:,147))*ymax(BCL3) - y(BCL3))/tau(BCL3); 
dydt(PI3K) = (OR(act(y(TLR4),rpar(:,14)),OR(act(y(IL10R),rpar(:,152)),act(y(GRB2),rpar(:,153))))*ymax(PI3K) - y(PI3K))/tau(PI3K); 
dydt(AKT) = (act(y(PI3K),rpar(:,154))*ymax(AKT) - y(AKT))/tau(AKT); 
dydt(MCL1) = (act(y(AKT),rpar(:,157))*ymax(MCL1) - y(MCL1))/tau(MCL1); 
dydt(CD14) = (act(y(LPS),rpar(:,12))*ymax(CD14) - y(CD14))/tau(CD14); 
dydt(TLR4) = (act(y(CD14),rpar(:,13))*ymax(TLR4) - y(TLR4))/tau(TLR4); 
dydt(TRIF) = (act(y(TLR4),rpar(:,15))*ymax(TRIF) - y(TRIF))/tau(TRIF); 
dydt(IRF3) = (act(y(TRIF),rpar(:,16))*ymax(IRF3) - y(IRF3))/tau(IRF3); 
dydt(CCL5_mrna) = (act(y(IRF3),rpar(:,19))*ymax(CCL5_mrna) - y(CCL5_mrna))/tau(CCL5_mrna); 
dydt(IFNbR) = (act(y(IFNb),rpar(:,123))*ymax(IFNbR) - y(IFNbR))/tau(IFNbR); 
dydt(JAKIFNbR) = (AND(rpar(:,124),act(y(IFNbR),rpar(:,124)),inhib(y(SOCS1),rpar(:,124)))*ymax(JAKIFNbR) - y(JAKIFNbR))/tau(JAKIFNbR); 
dydt(MyD88) = (OR(act(y(IL1R),rpar(:,11)),act(y(TLR4),rpar(:,20)))*ymax(MyD88) - y(MyD88))/tau(MyD88); 
dydt(IRAK4) = (AND(rpar(:,21),act(y(MyD88),rpar(:,21)),inhib(y(SOCS1),rpar(:,21)))*ymax(IRAK4) - y(IRAK4))/tau(IRAK4); 
dydt(IRAK1) = (act(y(IRAK4),rpar(:,22))*ymax(IRAK1) - y(IRAK1))/tau(IRAK1); 
dydt(TAB1) = (AND(rpar(:,24),inhib(y(SOCS3),rpar(:,24)),act(y(TRAF6),rpar(:,24)))*ymax(TAB1) - y(TAB1))/tau(TAB1); 
dydt(TRAF6) = (act(y(IRAK1),rpar(:,23))*ymax(TRAF6) - y(TRAF6))/tau(TRAF6); 
dydt(IFNgR) = (act(y(IFNg),rpar(:,102))*ymax(IFNgR) - y(IFNgR))/tau(IFNgR); 
dydt(GSK3) = (OR(AND(rpar(:,132),act(y(IL6R),rpar(:,132)),inhib(y(AKT),rpar(:,132))),OR(AND(rpar(:,155),inhib(y(AKT),rpar(:,155)),act(y(IFNgR),rpar(:,155))),AND(rpar(:,156),act(y(TNFR),rpar(:,156)),inhib(y(AKT),rpar(:,156)))))*ymax(GSK3) - y(GSK3))/tau(GSK3); 
dydt(JAK12_IFNg) = (AND(rpar(:,103),act(y(IFNgR),rpar(:,103)),inhib(y(SOCS1),rpar(:,103)))*ymax(JAK12_IFNg) - y(JAK12_IFNg))/tau(JAK12_IFNg); 
dydt(SHP2) = (act(y(JAK2),rpar(:,135))*ymax(SHP2) - y(SHP2))/tau(SHP2); 
dydt(STAT1) = (OR(act(y(TRAF6),rpar(:,26)),OR(act(y(p38),rpar(:,73)),OR(AND(rpar(:,106),act(y(JAK12_IFNg),rpar(:,106)),inhib(y(SHP2),rpar(:,106))),act(y(JAKIFNbR),rpar(:,125)))))*ymax(STAT1) - y(STAT1))/tau(STAT1); 
dydt(IRF1) = (act(y(IRF1_mrna),rpar(:,111))*ymax(IRF1) - y(IRF1))/tau(IRF1); 
dydt(IRF1_mrna) = (act(y(STAT1),rpar(:,108))*ymax(IRF1_mrna) - y(IRF1_mrna))/tau(IRF1_mrna); 
dydt(SOCS1) = (act(y(SOCS1_mrna),rpar(:,113))*ymax(SOCS1) - y(SOCS1))/tau(SOCS1); 
dydt(SOCS1_mrna) = (OR(act(y(CREB),rpar(:,94)),OR(act(y(IRF1),rpar(:,112)),OR(act(y(STAT3),rpar(:,143)),act(y(STAT6),rpar(:,175)))))*ymax(SOCS1_mrna) - y(SOCS1_mrna))/tau(SOCS1_mrna); 
dydt(Myc_mrna) = (act(y(STAT6),rpar(:,167))*ymax(Myc_mrna) - y(Myc_mrna))/tau(Myc_mrna); 
dydt(SMAD7_mrna) = (act(y(STAT1),rpar(:,119))*ymax(SMAD7_mrna) - y(SMAD7_mrna))/tau(SMAD7_mrna); 
dydt(ICAM1_mrna) = (act(y(STAT1),rpar(:,118))*ymax(ICAM1_mrna) - y(ICAM1_mrna))/tau(ICAM1_mrna); 
dydt(IL12Rb1) = (act(y(IL12),rpar(:,127))*ymax(IL12Rb1) - y(IL12Rb1))/tau(IL12Rb1); 
dydt(STAT4) = (AND(rpar(:,128),inhib(y(SOCS3),rpar(:,128)),act(y(IL12Rb1),rpar(:,128)))*ymax(STAT4) - y(STAT4))/tau(STAT4); 
dydt(IFNg_mrna) = (act(y(STAT4),rpar(:,129))*ymax(IFNg_mrna) - y(IFNg_mrna))/tau(IFNg_mrna); 
dydt(IL4R) = (OR(act(y(IL4),rpar(:,162)),AND(rpar(:,198),act(y(IL4),rpar(:,198)),act(y(IL4R_trans),rpar(:,198))))*ymax(IL4R) - y(IL4R))/tau(IL4R); 
dydt(JAK13_IL4) = (AND(rpar(:,164),inhib(y(SOCS1),rpar(:,164)),act(y(IL4R),rpar(:,164)))*ymax(JAK13_IL4) - y(JAK13_IL4))/tau(JAK13_IL4); 
dydt(STAT6) = (OR(AND(rpar(:,165),inhib(y(SHP2),rpar(:,165)),act(y(JAK13_IL4),rpar(:,165))),OR(AND(rpar(:,166),inhib(y(STAT1),rpar(:,166)),act(y(JAK13_IL4),rpar(:,166))),AND(rpar(:,189),act(y(JAK13_IL4),rpar(:,189)),act(y(KLF4),rpar(:,189)))))*ymax(STAT6) - y(STAT6))/tau(STAT6); 
dydt(CCL17_mrna) = (act(y(STAT6),rpar(:,168))*ymax(CCL17_mrna) - y(CCL17_mrna))/tau(CCL17_mrna); 
dydt(CCL17) = (act(y(CCL17_mrna),rpar(:,169))*ymax(CCL17) - y(CCL17))/tau(CCL17); 
dydt(PPARg_mrna) = (OR(act(y(STAT6),rpar(:,170)),act(y(KLF4),rpar(:,172)))*ymax(PPARg_mrna) - y(PPARg_mrna))/tau(PPARg_mrna); 
dydt(PPARg) = (act(y(PPARg_mrna),rpar(:,171))*ymax(PPARg) - y(PPARg))/tau(PPARg); 
dydt(IL4Ra_mrna) = (OR(act(y(STAT3),rpar(:,141)),act(y(STAT6),rpar(:,173)))*ymax(IL4Ra_mrna) - y(IL4Ra_mrna))/tau(IL4Ra_mrna); 
dydt(Arg1_mrna) = (act(y(STAT6),rpar(:,176))*ymax(Arg1_mrna) - y(Arg1_mrna))/tau(Arg1_mrna); 
dydt(Arg1) = (AND(rpar(:,177),inhib(y(iNOS),rpar(:,177)),act(y(Arg1_mrna),rpar(:,177)))*ymax(Arg1) - y(Arg1))/tau(Arg1); 
dydt(CD23_mrna) = (act(y(STAT6),rpar(:,178))*ymax(CD23_mrna) - y(CD23_mrna))/tau(CD23_mrna); 
dydt(CD23) = (act(y(CD23_mrna),rpar(:,179))*ymax(CD23) - y(CD23))/tau(CD23); 
dydt(AMAC1_mrna) = (act(y(STAT6),rpar(:,180))*ymax(AMAC1_mrna) - y(AMAC1_mrna))/tau(AMAC1_mrna); 
dydt(AMAC1) = (act(y(AMAC1_mrna),rpar(:,181))*ymax(AMAC1) - y(AMAC1))/tau(AMAC1); 
dydt(KLF4_mrna) = (OR(AND(rpar(:,95),act(y(CREB),rpar(:,95)),act(y(STAT6),rpar(:,95))),act(y(STAT6),rpar(:,187)))*ymax(KLF4_mrna) - y(KLF4_mrna))/tau(KLF4_mrna); 
dydt(KLF4) = (act(y(KLF4_mrna),rpar(:,188))*ymax(KLF4) - y(KLF4))/tau(KLF4); 
dydt(Fizz1_mrna) = (act(y(STAT6),rpar(:,184))*ymax(Fizz1_mrna) - y(Fizz1_mrna))/tau(Fizz1_mrna); 
dydt(Fizz1) = (act(y(Fizz1_mrna),rpar(:,185))*ymax(Fizz1) - y(Fizz1))/tau(Fizz1); 
dydt(Ym1_mrna) = (act(y(STAT6),rpar(:,182))*ymax(Ym1_mrna) - y(Ym1_mrna))/tau(Ym1_mrna); 
dydt(Ym1) = (act(y(Ym1_mrna),rpar(:,183))*ymax(Ym1) - y(Ym1))/tau(Ym1); 
dydt(IL10R) = (act(y(IL10),rpar(:,149))*ymax(IL10R) - y(IL10R))/tau(IL10R); 
dydt(JAK1IL10R) = (act(y(IL10R),rpar(:,150))*ymax(JAK1IL10R) - y(JAK1IL10R))/tau(JAK1IL10R); 
dydt(TNFa_trans) = (act(y(TNFa_mrna),rpar(:,51))*ymax(TNFa_trans) - y(TNFa_trans))/tau(TNFa_trans); 
dydt(IL1_trans) = (act(y(IL1_mrna),rpar(:,39))*ymax(IL1_trans) - y(IL1_trans))/tau(IL1_trans); 
dydt(IL6_trans) = (act(y(IL6_mrna),rpar(:,40))*ymax(IL6_trans) - y(IL6_trans))/tau(IL6_trans); 
dydt(IFNg_trans) = (act(y(IFNg_mrna),rpar(:,130))*ymax(IFNg_trans) - y(IFNg_trans))/tau(IFNg_trans); 
dydt(IL12_trans) = (0*ymax(IL12_trans) - y(IL12_trans))/tau(IL12_trans); 
dydt(IL10_trans) = (act(y(IL10_mrna),rpar(:,75))*ymax(IL10_trans) - y(IL10_trans))/tau(IL10_trans); 
dydt(IFNb_trans) = (act(y(IFNb_mrna),rpar(:,122))*ymax(IFNb_trans) - y(IFNb_trans))/tau(IFNb_trans); 
dydt(IKB_trans) = (act(y(IKBa_mrna),rpar(:,60))*ymax(IKB_trans) - y(IKB_trans))/tau(IKB_trans); 
dydt(IL4R_trans) = (act(y(IL4Ra_mrna),rpar(:,174))*ymax(IL4R_trans) - y(IL4R_trans))/tau(IL4R_trans); 

% utility functions 
function fact = act(x,rpar) 
% hill activation function with parameters w (weight), n (Hill coeff), EC50 
    w = rpar(1); 
    n = rpar(2); 
    EC50 = rpar(3); 
    beta = (EC50.^n - 1)./(2*EC50.^n - 1); 
    K = (beta - 1).^(1./n); 
    fact = w.*(beta.*x.^n)./(K.^n + x.^n); 
    if fact>w,                 % cap fact(x)<= 1 
        fact = w; 
    end
 
function finhib = inhib(x,rpar) 
% inverse hill function with parameters w (weight), n (Hill coeff), EC50 
    finhib = rpar(1) - act(x,rpar);
 
function z = OR(x,y) 
% OR logic gate 
    z = x + y - x*y;
 
function z = AND(rpar,varargin) 
% AND logic gate, multiplying all of the reactants together 
    w = rpar(1); 
    if w == 0, 
        z = 0; 
    else 
        v = cell2mat(varargin); 
        z = prod(v)/w^(nargin-2);  
    end 
